DROP TABLE IF EXISTS bet_option_org_statistics;
DROP TABLE IF EXISTS bet_option_player_statistics;
DROP TABLE IF EXISTS opposite;

CREATE TABLE bet_option_org_statistics (id bigint(20) NOT NULL AUTO_INCREMENT comment 'id', trade_code varchar(64) comment '交易码', pre_id bigint(20) comment '上级id', org_id bigint(20) comment '组织id', org_account varchar(32) comment '组织账号', org_nick_name varchar(32) comment '组织昵称', player_lottery_id bigint(20) comment '玩家彩票id', player_id bigint(20) comment '玩家id', lottery_id bigint(20) comment '彩种id', lottery_name varchar(32) comment '彩种名', handicap_id bigint(20) comment '盘口id', sub_handicap_id bigint(20) comment '子盘口id', sub_handicap_name varchar(32) comment '子盘口名', play_method_id bigint(20) comment '玩法id', play_method_name varchar(32) comment '玩法名字', bet_option_id bigint(20) comment '投注项id', bet_option_name varchar(32) comment '投注项名', issue_number varchar(32) comment '期号', principal decimal(18, 4) comment '投注额', bet_num int(10) comment '投注数量', valid_amount decimal(18, 4) comment '有效投注金额', share_ratio float comment '占成比例', actual_share_ratio float comment '实际占成比例', share_commission_amount decimal(18, 4) comment '占成应出佣金', commission_ratio float comment '佣金比例', commission_amount decimal(18, 4) comment '佣金', commission_profit_amount decimal(18, 4) comment '佣金盈余', earn_commission_amount decimal(18, 4) comment '赚钱佣金', merit_pre_amount decimal(18, 4) comment '贡献上级', payable_pre_amount decimal(18, 4) comment '应付上级', profit_loss_amount decimal(18, 4) comment '损益结果', fly_share_amount decimal(18, 4) comment '飞单后占成金额', non_fly_share_amount decimal(18, 4) comment '未补货占成', non_fly_loss_amount decimal(18, 4) comment '未补货损结果', non_fly_profit_loss_amount decimal(18, 4) comment '未补货益结果', fly_commission_amount decimal(18, 4) comment '补货退水', fly_loss_amount decimal(18, 4) comment '飞单损结果', fly_profit_amount decimal(18, 4) comment '补货益结果', earn_odds_amount decimal(18, 4) comment '赚赔', owner_type varchar(16) comment '所有者类型', status varchar(16) comment '状态：待开奖 No_Draw 中奖 Winning 未中奖 Not_Winning ,冻结 Freeze, 无效 Invalid,走盘退款 Walking_Refund', is_immediate_player varchar(4) comment '是否直属玩家: Y 是 ，N  否', create_time datetime NULL comment '创建时间', PRIMARY KEY (id), INDEX (trade_code), INDEX (pre_id), INDEX (org_id), INDEX (org_account), INDEX (player_lottery_id), INDEX (player_id), INDEX (lottery_id), INDEX (handicap_id), INDEX (sub_handicap_id), INDEX (play_method_id), INDEX (bet_option_id), INDEX (issue_number)) comment='投注项组织维度统计' ENGINE=InnoDB;
CREATE TABLE bet_option_player_statistics (id bigint(20) NOT NULL AUTO_INCREMENT comment 'id', trade_code varchar(64) comment '交易码', player_lottery_id bigint(20) comment '玩家彩票id', player_id bigint(20) comment '玩家id', lottery_id bigint(20) comment '彩种id', lottery_name varchar(32) comment '彩种名', handicap_id bigint(20) comment '盘口id', sub_handicap_id bigint(20) comment '子盘口id', sub_handicap_name varchar(32) comment '子盘口名', play_method_id bigint(20) comment '玩法id', play_method_name varchar(32) comment '玩法名字', bet_option_id bigint(20) comment '投注项id', bet_option_name varchar(32) comment '投注项名', issue_number varchar(32) comment '期号', principal decimal(18, 4) comment '投注额', bet_num int(10) comment '投注数量', player_commission_ratio float comment '玩家佣金比例', player_commission decimal(18, 4) comment '玩家佣金', player_profit_loss decimal(18, 4) comment '玩家损益结果', owner_type varchar(16) comment '所有者类型', status varchar(16) comment '待开奖 No_Draw 中奖 Winning 未中奖 Not_Winning ,冻结 Freeze, 无效 Invalid,走盘退款 Walking_Refund', create_time datetime NULL comment '创建时间', PRIMARY KEY (id), INDEX (trade_code), INDEX (player_lottery_id), INDEX (player_id), INDEX (lottery_id), INDEX (handicap_id), INDEX (sub_handicap_id), INDEX (play_method_id), INDEX (bet_option_id), INDEX (issue_number)) comment='玩法的投注项玩家角度统计' ENGINE=InnoDB;
CREATE TABLE opposite (id bigint(20) NOT NULL AUTO_INCREMENT comment 'id', pre_id bigint(20) comment '上级id', org_id bigint(20) comment '组织id', org_account varchar(32) comment '组织账号', org_nick_name varchar(32) comment '组织昵称', player_lottery_id bigint(20) comment '玩家彩票id', player_id bigint(20) comment '玩家id', lottery_id bigint(20) comment '彩种id', handicap_id bigint(20) comment '盘口id', sub_handicap_id bigint(20) comment '子盘口id', play_method_id bigint(20) comment '玩法id', play_method_name varchar(32) comment '玩法名字', bet_option_id bigint(20) comment '投注项id', bet_option_name varchar(32) comment '投注项名', issue_number varchar(32) comment '期号', odds varchar(10) comment '赔率', bet_amount decimal(18, 4) comment '玩家投注的总额，（本金-佣金-补货值）', estimated_amount decimal(18, 4) comment '预估玩家彩金总额（彩金+佣金+补货值）', supplement_amount decimal(18, 4) comment '飞单补货值（向上级下单转移风险的值）', fly_type varchar(16) comment '补货类型：单补 Single，多补  Multi', type varchar(16) comment '对立面类型：玩家面 Lost,平台面 Winning', owner_type varchar(16) comment '所有者类型', PRIMARY KEY (id), INDEX (pre_id), INDEX (org_id), INDEX (org_account), INDEX (player_lottery_id), INDEX (player_id), INDEX (lottery_id), INDEX (handicap_id), INDEX (sub_handicap_id), INDEX (play_method_id), INDEX (bet_option_id), INDEX (issue_number)) comment='对立面' ENGINE=InnoDB;
